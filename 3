topk(5, (
  (sum by (process) (irate(windows_process_cpu_time_total{job="windows", instance=~"10.7..101:9182", process!~"(?i)idle"}[$_rate_interval])) 
   / ignoring (process) group_left 
   sum(windows_cs_logical_processors)
  ) * 100
))


topk(
    5, 
    sum(
        irate(windows_process_cpu_time_total{job="window", instance="10.7.24.181:9182", process!~"(?1)idie"}[$__rate_interval])
    ) by (process) 
    * 100 
    / sum(windows_cs_logical_processors)
)
