---
- name: Backup FortiGate configurations using FTP
  hosts: fortigates
  gather_facts: no
  vars:
    fortigate_user: "your_username"
    fortigate_password: "your_password"
    ftp_server: "ftp_server_ip"
    ftp_user: "ftp_username"
    ftp_password: "ftp_password"
    backup_path: "/path/to/backups"

  tasks:
    - name: Backup FortiGate configuration to FTP
      expect:
        command: ssh "{{ fortigate_user }}@{{ inventory_hostname }}"
        responses:
          (?i)password: "{{ fortigate_password }}"
          ".*#": |
            execute backup config ftp {{ inventory_hostname }}_backup.conf {{ ftp_server }} {{ ftp_user }} {{ ftp_password }}
            exit
      register: backup_result

    - name: Print backup result
      debug:
        var: backup_result

# Inventory file (hosts)
# [fortigates]
# fortigate1 ansible_host=fortigate1_ip
# fortigate2 ansible_host=fortigate2_ip
# ...
