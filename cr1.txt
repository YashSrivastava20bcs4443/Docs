import time
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.action_chains import ActionChains

# Find all rows containing alerts
rows = driver.find_elements(By.XPATH, "//div[contains(@class, 'fxc-gc-row')]")

# Iterate through the first alert
index = 1
row = rows[0]

try:
    # Re-find the row element to avoid stale element reference
    row = driver.find_elements(By.XPATH, "//div[contains(@class, 'fxc-gc-row')]")[0]
    
    # Find the first and second columns in the row
    first_column = row.find_element(By.XPATH, ".//div[contains(@class, 'fxc-gc-cell')][1]//a[@class='fxc-gcflink-link']")
    second_column = row.find_element(By.XPATH, ".//div[contains(@class, 'fxc-gc-cell')][2]//span[@class='ext-severity-text']")
    
    # Get the text from the first and second columns
    first_column_text = first_column.text
    second_column_text = second_column.text
    
    # Write the data to a text file
    with open("alert_data.txt", "w") as file:
        file.write(f"First Column: {first_column_text}\n")
        file.write(f"Second Column: {second_column_text}\n")
        
    # Take a screenshot of the page
    driver.save_screenshot(f"screenshot_{index}.png")
    
    # Wait for the page to load
    time.sleep(5)  # You might need to adjust the wait time

except Exception as e:
    print(f"An error occurred: {str(e)}")
