import time
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# Find all rows containing alerts
rows = driver.find_elements(By.XPATH, "//div[contains(@class, 'fxc-gc-row')]")

# Iterate through each row containing an alert
for row in rows:
    try:
        # Find the third column in the row
        third_column = row.find_element(By.XPATH, ".//div[@class='fxc-gc-cell fxc-gc-columncell_0_2']")
        
        # Click on the third column
        third_column.click()
        
        # Wait for the new page to load
        WebDriverWait(driver, 10).until(EC.url_changes)
        
        # Take a screenshot of the page
        driver.save_screenshot(f"screenshot_{rows.index(row) + 1}.png")
        
        # Go back to the previous page (the alert details)
        driver.back()
        
        # Wait for the page to load
        WebDriverWait(driver, 10).until(EC.url_changes)
    
    except Exception as e:
        # If a stale element reference error occurs, re-locate the row
        rows = driver.find_elements(By.XPATH, "//div[contains(@class, 'fxc-gc-row')]")
        print(f"An error occurred: {str(e)}")
        continue
