# Find all alert elements
alert_elements = driver.find_elements_by_xpath("//div[@data-automation-id='detailsList']/div[contains(@role, 'listitem')]")

# Capture screenshots of "Affected Resources" for each alert
for index, alert_element in enumerate(alert_elements, 1):
    # Click on the alert element to view details
    alert_element.click()

    # Wait for alert details to load
    time.sleep(5)

    # Find all links within the current alert
    links = driver.find_elements_by_xpath("//a")

    # Iterate through each link and click on the one containing "Affected Resources" text
    for link in links:
        if "Affected Resources" in link.text:
            link.click()
            break

    # Wait for the page with affected resources to load
    time.sleep(5)

    # Capture screenshot of the page with affected resources
    driver.save_screenshot(f'alert_{index}_affected_resources.png')

    # Go back to the dashboard
    driver.back()

    # Wait for page to load
    time.sleep(5)

# Quit the driver
driver.quit()
