from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# Wait for alert elements to be visible
alert_elements = WebDriverWait(driver, 10).until(
    EC.visibility_of_all_elements_located((By.XPATH, "//div[@data-automation-id='detailsList']/div[contains(@role, 'listitem')]"))
)

# Capture screenshots of "Affected Resources" for each alert
for index, alert_element in enumerate(alert_elements, 1):
    # Click on the alert element to view details
    alert_element.click()

    # Wait for alert details to load
    time.sleep(5)  # You can replace this with a WebDriverWait if needed

    # Find all links within the current alert
    links = WebDriverWait(driver, 10).until(
        EC.presence_of_all_elements_located((By.TAG_NAME, "a"))
    )

    # Iterate through each link and click on the one containing "Affected Resources" text
    for link in links:
        if "Affected Resources" in link.text:
            link.click()
            break

    # Wait for the page with affected resources to load
    time.sleep(5)  # You can replace this with a WebDriverWait if needed

    # Capture screenshot of the page with affected resources
    driver.save_screenshot(f'alert_{index}_affected_resources.png')

    # Go back to the dashboard
    driver.back()

    # Wait for page to load
    time.sleep(5)  # You can replace this with a WebDriverWait if needed
#--------------------------------------------------------#
from selenium import webdriver

# Initialize Chrome driver
driver = webdriver.Chrome()

# Maximize the window
driver.maximize_window()

driver.execute_script("document.body.style.zoom='80%'")
