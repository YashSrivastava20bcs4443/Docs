# Find all alert elements
alert_elements = driver.find_elements_by_xpath("//div[@data-automation-id='detailsList']/div[contains(@role, 'listitem')]")

# Capture screenshots of "Affected Resources" for each alert
for index, alert_element in enumerate(alert_elements, 1):
    # Click on the alert element to view details
    alert_element.click()

    # Wait for alert details to load
    time.sleep(5)

    # Find the link to navigate to the detail page of the current alert
    detail_link = driver.find_element_by_xpath("//a[contains(@href,'details')]").get_attribute('href')

    # Open the detail page for the current alert
    driver.get(detail_link)

    # Wait for page to load
    time.sleep(5)

    # Capture screenshot of the "Affected Resources" section
    affected_resources_element = driver.find_element_by_xpath("//div[@class='affected-resources']")
    affected_resources_element.screenshot(f'alert_{index}_affected_resources.png')

    # Go back to the dashboard
    driver.back()

    # Wait for page to load
    time.sleep(5)

# Quit the driver
driver.quit()
