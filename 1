import requests

prometheus_url = "https://prometheus.abl.com/api/v1/query?step=1440m"

# CPU Usage Query
cpu_query = '100 - max(1 - rate(node_cpu_seconds_total{mode="idle"}[5m])) by (instance)'
cpu_response = requests.get(f'{prometheus_url}&query={cpu_query}').json()

# Memory Usage Query
memory_query = '100 * (max(node_memory_MemAvailable_bytes) by (instance) / max(node_memory_MemTotal_bytes) by (instance))'
memory_response = requests.get(f'{prometheus_url}&query={memory_query}').json()

# Process the responses as needed
print(cpu_response)
print(memory_response)
