# Sidebar filters
st.sidebar.header("Filters")

# Event Source Filter with 'All' Option
event_sources = df['EventSource'].unique()
event_sources = ['All'] + list(event_sources)  # Add 'All' option at the beginning
selected_source = st.sidebar.selectbox("Select Event Source:", options=event_sources)

# Apply Event Source Filter
if selected_source != 'All':
    filtered_data = df[(df['EventSource'] == selected_source)]
else:
    filtered_data = df  # If 'All' is selected, use the entire dataset

# Date Range Filter
date_range = st.sidebar.date_input(
    "Select Date Range:",
    [df['Day'].min(), df['Day'].max()]
)
if len(date_range) == 2:
    start_date, end_date = date_range
    filtered_data = filtered_data[(filtered_data['Day'] >= start_date) & (filtered_data['Day'] <= end_date)]

# Event Level Filter with Multi-Selection
event_levels = df['EventLevel'].unique()
selected_levels = st.sidebar.multiselect("Select Event Level(s):", options=event_levels, default=event_levels)

# Apply Event Level Filter
filtered_data = filtered_data[filtered_data['EventLevel'].isin(selected_levels)]
