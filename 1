import requests
from requests.auth import HTTPBasicAuth
import json

# Unity system details
unity_ip = "10.1.3.96"  # Replace with your system's IP address
username = "your_username"  # Replace with your username
password = "your_password"  # Replace with your password

# API endpoint for system capacity (example endpoint, adjust as needed)
resource = "systemCapacity"
url = f"https://{unity_ip}/api/types/{resource}?compact=True"

# Authentication
auth = HTTPBasicAuth(username, password)

# Headers required by the Unity API
headers = {
    "Accept": "application/json",
    "Content-type": "application/json",
    "X-EMC-REST-CLIENT": "true"
}

# Disable SSL warnings
requests.packages.urllib3.disable_warnings(requests.packages.urllib3.exceptions.InsecureRequestWarning)

# Send GET request
response = requests.get(url, headers=headers, auth=auth, verify=False)

# Check if the request was successful
if response.status_code == 200:
    data = response.json()
    # Parse and extract system capacity details
    if 'entries' in data:
        for entry in data['entries']:
            content = entry['content']
            free_space = content.get('freeSpace', 'N/A')
            preallocated_space = content.get('preallocatedSpace', 'N/A')
            used_space = content.get('usedSpace', 'N/A')
            print(f"Free Space: {free_space}")
            print(f"Preallocated Space: {preallocated_space}")
            print(f"Used Space: {used_space}")
    else:
        print("No entries found in the response.")
else:
    print(f"Failed to fetch data, status code: {response.status_code}")
    print("Response content:", response.text)


import requests

# Replace with your Unity system details
unity_ip = "10.1.3.96"
username = "your_username"
password = "your_password"

# API endpoint for login (example, may vary)
login_url = f"https://{unity_ip}/api/login/"

# Data to be sent for login (this will vary depending on the API)
login_data = {
    "username": username,
    "password": password
}

# Disable SSL warnings
requests.packages.urllib3.disable_warnings(requests.packages.urllib3.exceptions.InsecureRequestWarning)

# Login request
response = requests.post(login_url, json=login_data, verify=False)

if response.status_code == 200:
    # Assuming the token is in the JSON response
    token = response.json().get('token')

    # Use the token in subsequent requests
    headers = {
        "Authorization": f"Bearer {token}",
        "Accept": "application/json"
    }

    # Example API request with token
    api_url = f"https://{unity_ip}/api/types/"
    api_response = requests.get(api_url, headers=headers, verify=False)

    if api_response.status_code == 200:
        print("API Data:", api_response.json())
    else:
        print(f"Failed to fetch data, status code: {api_response.status_code}")
        print("Response content:", api_response.text)
else:
    print(f"Login failed, status code: {response.status_code}")
    print("Response content:", response.text)

