import requests

# Define variables
tenant_id = "your-tenant-id"
client_id = "your-client-id"
client_secret = "your-client-secret"

# Get an authentication token
url = f"https://login.microsoftonline.com/{tenant_id}/oauth2/token"
headers = {
    'Content-Type': 'application/x-www-form-urlencoded'
}
body = {
    'grant_type': 'client_credentials',
    'client_id': client_id,
    'client_secret': client_secret,
    'resource': 'https://analysis.windows.net/powerbi/api'
}

response = requests.post(url, headers=headers, data=body)
token = response.json().get('access_token')

# Define the REST API URL for workspaces
api_url = "https://api.powerbi.com/v1.0/myorg/groups"
headers = {
    'Authorization': f'Bearer {token}'
}

# Make the API request to get the list of workspaces
response = requests.get(api_url, headers=headers)
workspaces = response.json().get('value', [])

# Filter the workspaces with name "Data Lab"
data_lab_workspaces = [workspace for workspace in workspaces if workspace.get('name') == "Data Lab"]

# Output the workspace details
if data_lab_workspaces:
    for workspace in data_lab_workspaces:
        print(f"Workspace ID: {workspace.get('id')}")
        print(f"Workspace Name: {workspace.get('name')}")
        print(f"Workspace IsReadOnly: {workspace.get('isReadOnly')}")
        print("-----------------------------------")
else:
    print("No workspaces found with the name 'Data Lab'.")
