def main():
    """Main function to check certificate expiry and send notifications."""
    expiring_certificates = []
    current_date = datetime.now()

    for url in URLS:
        expiry_date = get_certificate_expiry(url)
        if expiry_date:
            days_left = (expiry_date - current_date).days

            # ✅ If more than 30 days, print the result instead of sending email
            if days_left > 30:
                print(f"{url} - Certificate expires in {days_left} days on {expiry_date.strftime('%Y-%m-%d')}.")
            else:
                expiring_certificates.append({
                    "url": url,
                    "expiry_date": expiry_date.strftime('%Y-%m-%d'),
                    "days_left": days_left
                })

    # ✅ Send email only if certificates expire within 30 days
    if expiring_certificates:
        send_email(expiring_certificates)
    else:
        print("No certificates expiring within 30 days.")
